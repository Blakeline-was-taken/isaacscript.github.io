<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<script src="/js/hotkey.js"></script><title data-react-helmet="true">Building an Example Mod | IsaacScript</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Building an Example Mod | IsaacScript"><meta data-react-helmet="true" name="description" content="This is a tutorial that shows off how to code a simple mod with IsaacScript. Our goal will be to create a new passive item in the game called the Green Candle."><meta data-react-helmet="true" property="og:description" content="This is a tutorial that shows off how to code a simple mod with IsaacScript. Our goal will be to create a new passive item in the game called the Green Candle."><meta data-react-helmet="true" property="og:url" content="https://isaacscript.github.io/docs/example-mod"><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://isaacscript.github.io/docs/example-mod"><link rel="stylesheet" href="/styles.b1123bec.css">
<link rel="stylesheet" href="/main.103933fb.css">
<link rel="stylesheet" href="/1be78505.0edf629a.css">
<link rel="preload" href="/styles.131dfc03.js" as="script">
<link rel="preload" href="/runtime~main.3620621c.js" as="script">
<link rel="preload" href="/main.df272832.js" as="script">
<link rel="preload" href="/1.5ab4e0c4.js" as="script">
<link rel="preload" href="/2.436b57f3.js" as="script">
<link rel="preload" href="/4.c3d1d3f0.js" as="script">
<link rel="preload" href="/1be78505.6305a4b7.js" as="script">
<link rel="preload" href="/27.80302adb.js" as="script">
<link rel="preload" href="/935f2afb.6cd477d4.js" as="script">
<link rel="preload" href="/17896441.625286cd.js" as="script">
<link rel="preload" href="/9bc37e6c.74604c52.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/images/isaacscript-logo.png"><strong class="navbar__title">IsaacScript</strong></a><a class="navbar__item navbar__link" href="/docs/features">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://discord.gg/KapmKQ2gUD" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord</a><a href="https://github.com/IsaacScript/isaacscript" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://wofsauge.github.io/IsaacDocs/rep/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API Docs</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/images/isaacscript-logo.png"><strong class="navbar__title">IsaacScript</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/features">Docs</a></li><li class="menu__list-item"><a href="https://discord.gg/KapmKQ2gUD" target="_blank" rel="noopener noreferrer" class="menu__link">Discord</a></li><li class="menu__list-item"><a href="https://github.com/IsaacScript/isaacscript" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://wofsauge.github.io/IsaacDocs/rep/" target="_blank" rel="noopener noreferrer" class="menu__link">API Docs</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/features">Features</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/right-for-me">Is IsaacScript Right for Me?</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/what-is-isaacscript-doing">What is IsaacScript Doing?</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/directory-structure">Project Directory Structure</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/javascript-tutorial">JavaScript/TypeScript Tutorial</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/example-mod">Building an Example Mod</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/refactoring-mod">Refactoring an Example Mod</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/converting-lua-code">Converting Lua Code</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/publishing-to-the-workshop">Publishing to the Workshop</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/gotchas">Gotchas</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/function-signatures">Function Signatures</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Building an Example Mod</h1></header><div class="markdown"><p>This is a tutorial that shows off how to code a simple mod with IsaacScript. Our goal will be to create a new passive item in the game called the <em>Green Candle</em>.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="0-unpack-the-games-resources"></a>0) Unpack the Games Resources<a aria-hidden="true" tabindex="-1" class="hash-link" href="#0-unpack-the-games-resources" title="Direct link to heading">#</a></h2><p>Most modders will have already done this, but just in case you haven&#x27;t, you should run the game&#x27;s unpacker. This is located at <code>C:\Program Files (x86)\Steam\steamapps\common\The Binding of Isaac Rebirth\tools\ResourceExtractor\ResourceExtractor.exe</code>.</p><p>Doing this allows you to see all of the vanilla assets and how the directory structure is laid out.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1-initializing-the-project"></a>1) Initializing the Project<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1-initializing-the-project" title="Direct link to heading">#</a></h2><p>For this tutorial, we will be using <code>C:\Repositories\green-candle</code> as the directory for our mod.</p><p>In a Windows command prompt:</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-batch codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkdir C:\Repositories\green-candle</span></div><div class="token-line" style="color:#393A34"><span class="token plain">cd C:\Repositories\green-candle</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npx isaacscript init --use-current-dir --save-slot=1 --vscode</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npx isaacscript</span></div></code></pre></div><p>At this point, the skeleton for our mod is in place, and IsaacScript is running in the background. We can now begin working.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2-create-the-image-for-the-item"></a>2) Create the Image for the Item<a aria-hidden="true" tabindex="-1" class="hash-link" href="#2-create-the-image-for-the-item" title="Direct link to heading">#</a></h2><p>First, we will set up the image for how the item will appear in-game. We will use this image: <img alt="Green Candle" src="data:image/png;base64,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"></p><p>Most images for a mod should be placed in a &quot;resources&quot; subdirectory. (This corresponds to how things are organized in <code>C:\Program Files (x86)\Steam\steamapps\common\The Binding of Isaac Rebirth\resources</code>.)</p><p>For our purposes, we will need to copy <a target="_blank" href="/assets/files/green_candle-773038e3176466980936619fc81b442e.png">the Green Candle image</a> to <code>C:\Repositories\green-candle\mod\resources\gfx\items\collectibles\green_candle.png</code>. (You will need to create the &quot;resources&quot;, &quot;gfx&quot;, &quot;items&quot;, and &quot;collectibles&quot; directories, since they won&#x27;t exist yet.)</p><p>Notice that this path corresponds to the &quot;real&quot; items graphics directory of <code>C:\Program Files (x86)\Steam\steamapps\common\The Binding of Isaac Rebirth\resources\gfx\items\collectibles\</code>. Under the hood, the game will merge the two directories when you enable the mod.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="3-create-the-entry-for-the-item-in-itemsxml"></a>3) Create the Entry For the Item in <code>items.xml</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#3-create-the-entry-for-the-item-in-itemsxml" title="Direct link to heading">#</a></h2><p>Next, we need to tell the game that the new item should exist. This is done by adding a new entry to the &quot;items.xml&quot; file.</p><p>New entries for things go in the &quot;content&quot; subdirectory. Make a blank file at <code>C:\Repositories\green-candle\mod\content\items.xml</code>. (You will need to create the &quot;content&quot; directory, since it won&#x27;t exist yet.)</p><p>In this file, add the following:</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-xml codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">items</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">gfxroot</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">gfx/items/</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">version</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">passive</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">description</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Mass poison</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">gfx</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">green_candle.png</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Green Candle</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">items</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></div></code></pre></div><p>Now, the item will exist in the game, and you can give it to yourself with the console command of <code>giveitem green candle</code>.</p><p>Notice that this file is in the same format as the &quot;real&quot; items.xml file located at <code>C:\Program Files (x86)\Steam\steamapps\common\The Binding of Isaac Rebirth\resources\items.xml</code>. Under the hood, the game will merge the contents of your little items.xml file with the big items.xml file when you enable the mod.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="4-create-the-entry-for-the-item-in-itempoolsxml"></a>4) Create the Entry for the Item in <code>itempools.xml</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#4-create-the-entry-for-the-item-in-itempoolsxml" title="Direct link to heading">#</a></h2><p>Even though the item exists in the game, it is not yet present in any of the item pools. This means that players will never randomly discover your item as they play the game.</p><p>So, let&#x27;s add the item to the Treasure Room pool. Make a blank file at <code>C:\Repositories\green-candle\mod\content\itempools.xml</code> and add the following to it:</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-xml codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ItemPools</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Pool</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Name</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">treasure</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Item</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Name</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Green Candle</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Weight</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">DecreaseBy</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">RemoveOn</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">0.1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">Pool</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ItemPools</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></div></code></pre></div><p>Here, we use values for &quot;Weight&quot;, &quot;DecreaseBy&quot;, and &quot;RemoveOn&quot; that match what is used for all of the other items in the Treasure Room pool. (You can see this if you open the &quot;real&quot; itempools.xml file at <code>C:\Program Files (x86)\Steam\steamapps\common\The Binding of Isaac Rebirth\resources\items.xml</code>.)</p><p>Now, the item will sometimes randomly appear for players when they enter a Treasure Room!</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="5-start-coding-the-effect"></a>5) Start Coding the Effect<a aria-hidden="true" tabindex="-1" class="hash-link" href="#5-start-coding-the-effect" title="Direct link to heading">#</a></h2><p>Right now, if players pick up your item, it won&#x27;t actually do anything. This is where the Lua code comes in.</p><p>Open <code>C:\Repositories\green-candle\src\main.ts</code>, which contains the TypeScript code that will be transpiled to the &quot;main.lua&quot; file and read by the game.</p><p>The bootstrapper created a skeleton of a mod for us. As you can see, it calls the <code>Isaac.DebugString()</code> function when the <code>MC_POST_GAME_STARTED</code> callback is fired.</p><p>(<code>Isaac</code> is a global class provided by the game with helpful methods on it. <code>Isaac.DebugString()</code> simply writes something to the log.txt file, which is located at <code>C:\Users\[username]\Documents\My Games\Binding of Isaac Repentance\log.txt</code>.)</p><p>The <code>MC_POST_GAME_STARTED</code> callback is useful for initializing things at the start of every run or making the player start with some novel ability. For our purposes, we don&#x27;t need it, so we can remove all of the lines relating to that.</p><p>After we have deleted the lines relating to the <code>MC_POST_GAME_STARTED</code> callback, we can fix some of the capitalization:</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/MYewdgzgLgBA5gJwKZLAYQIZgCYBskwC8MASknAJbRIICyI2AFAEQDiyqMmO+zANDACMASgDcQA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> greenCandle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">RegisterMod</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Green Candle&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></code></pre></div><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/JIZwhmDGB0AiCmAjArgcwMoBcBOBLAdqgBQBEAKgBbwAEA4tvPPtQMJj4AmANjQLYD2HarhDD8uTLjBdcAL3gdoJAJQBuIA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token maybe-class-name">Isaac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">DebugString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;The Green Candle mod is initialized.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></code></pre></div><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="6-get-the-id-for-the-green-candle-item"></a>6) Get the ID for the Green Candle Item<a aria-hidden="true" tabindex="-1" class="hash-link" href="#6-get-the-id-for-the-green-candle-item" title="Direct link to heading">#</a></h2><p>When the game loads a new item, it assigns it an item ID. These IDs start at 730 and count upwards. (729 is the item ID of the final vanilla item, &quot;Decap Attack&quot;, so the first available ID for mods is 730.)</p><p>The item ID that the Green Candle gets will depend on how many other custom modded items that we have loaded. So, in order to write code for the Green Candle, we have to ask the game what the current ID is and store it for later.</p><p>In order to do this, we need to use the <code>Isaac.GetItemIdByName()</code> method:</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/MYewdgzgLgBA5gJwKZLAYQIZgCYBskCSUSAtgQCIwC8MBEGGwAdAOJJRGkHYBCAngDkMJJAAoARC2SoYmHPnEBKANxA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> greenCandleItemID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Isaac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">GetItemIdByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Green Candle&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></code></pre></div><p>Put this below the line that registers the mod.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="7-add-a-new-callback"></a>7) Add a New Callback<a aria-hidden="true" tabindex="-1" class="hash-link" href="#7-add-a-new-callback" title="Direct link to heading">#</a></h2><p>We want the Green Candle to have a random chance to poison every enemy in the room on every frame. So, we need code to run on every frame, and that means we need to use the <code>MC_POST_UPDATE</code> callback.</p><p>Add the following code:</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/GYVwdgxgLglg9mABABzgZygVWQEwIZQCmAFAJSIDeAUIogJJp54QB0AIoQEYgDmAylABOMMD2IAiAIKIeeALaFEwQfMUArEBhR40aQjgCE40gG4qAXypUA9NcQAlQjxgZCgxBDwAbL52YBrNCoeQUJCMABhPDAcL0IWSRwcKJ8-CH9iAFk4ZO9fALQWTIiAfQAFAHk+ABUSzDK2SWqAUQAaFHQsXAJCUyA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">postUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Isaac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">DebugString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;A game frame just passed!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Register callbacks</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">greenCandle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">AddCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">ModCallbacks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">MC_POST_UPDATE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> postUpdate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></code></pre></div><p>Now, we can run the mod and confirm that this code makes tons of messages in the log.txt file at the rate of 30 times a second.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="8-getting-the-number-of-green-candles"></a>8) Getting the Number of Green Candles<a aria-hidden="true" tabindex="-1" class="hash-link" href="#8-getting-the-number-of-green-candles" title="Direct link to heading">#</a></h2><p>Let&#x27;s get rid of the <code>Isaac.DebugString()</code> call and set up a new function for applying the green candle effect:</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/GYVwdgxgLglg9mABABzgZygVWQEwIZQCmAFAJSIDeAUIohABaEQDWAgssgDYCeA4gE6FCYAMJ4wOToQCiwYEyhkA3FQC+VKqEiwEdRi3Zc+g4WIlTZ86GUo1EAenuIAKgHkAIq8QBaRADEYTk5EKHoYNEQYMDUgA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">postUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">checkApplyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkApplyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// TODO - Fill this in</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></code></pre></div><p>Since Isaac is a co-op game, it is possible that up to 4 players could all have the Green Candle at the same time. We want our mod to work properly in multiplayer, so we have to loop over all the players.</p><p>To start with, we get a variable for the current game by invoking <code>Game()</code>, which is a global variable provided for us, similar to the <code>Isaac</code> class. Once we have the game object, we can use the <code>GetNumPlayers()</code> method:</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/GYVwdgxgLglg9mABBAFgUwgawIIAdcA2AngOIBOaaYAwgIZgAmBaAosMBlABQCUiA3gChEyBAGcoiAOa0AtmkQBeRCTlpeAbmGiwExGBCyACgVpE0ZMUulqAdCTRQAcoZNmLYzduBwyiLsySMNYADBqIwQA8+q6m5pbhMADUSXxCIiIA9JmIACoA8gAi+YgAtIjU6FgRwIhQ6IiE7n4otFbklEh0jMzaAL6CfUA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkApplyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> game </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Game</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> numPlayers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> game</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">GetNumPlayers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> numPlayers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// TODO - Check if the player has Green Candle</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></code></pre></div><p>The <code>Isaac.GetPlayer()</code> method allows us to get a specific player object. Once we have that, we can check to see if they have the Green Candle by using the <code>HasCollectible()</code> method:</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/GYVwdgxgLglg9mABBAFgUwgawIIAdcA2AngOIBOaaYAwgIZgAmBaAosMBlABQCUiA3gChEyBAGcoiAOa0AtmkQBeRCTlpeAbmGiwExGBCyACgVpE0ZMUulqAdCTRQAcoZNmLYzduBwyiLsySMNYADBqIwQA8+q6m5pbhMADUSXxCIiIQ4pKE7n7KAJJitLQQ9o5u8VwwPFoZEcD+ufGIAISKygYEBIgAZL2IzRa2ABK0YtRw3ZwwAEbMXFIUVHSMzAVQaLIFACI8adr1tPjE5JQ09Eys7JxcQ2S1h4gAvtqvr4KgkLAIiMeEpGWFzW1w40DucQsAC5ECwwLAoERKhYDiIAPRoxAAFQA8jscYJnkA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkApplyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> game </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Game</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> numPlayers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> game</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">GetNumPlayers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> numPlayers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> player </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Isaac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">GetPlayer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">player </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> player</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">HasCollectible</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">greenCandleItemID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">applyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">player</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">applyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">player</span><span class="token parameter punctuation" style="color:#393A34">:</span><span class="token parameter"> EntityPlayer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// TODO</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></code></pre></div><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="9-looping-over-all-the-enemies-in-a-room"></a>9) Looping Over All the Enemies in a Room<a aria-hidden="true" tabindex="-1" class="hash-link" href="#9-looping-over-all-the-enemies-in-a-room" title="Direct link to heading">#</a></h2><p>Every enemy in the room should have a chance of being poisoned. So, we need to loop over all enemies in the room with <code>Isaac.GetRoomEntities()</code>.</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/GYVwdgxgLglg9mABAQwA6oDYE8DiAnAUwLAGFkwATDAgUWGAOgApNksC8AuRGsWKLAAUMbDgEpEAbwBQiRMDh5ETCAgDOURMX5ZEcYIgCSa5MggA6HASgAlOHAC2vfjAJqmYiTLlyYBpmoAFnAgGBQAgujY+ESk5FS09IxQACpwzjACTNqZWJ5Ssj5yAPTFiCkA8gAiFYgAtIiRmLqocDBqCIVyAL6Fvb3SoJCwCIhBIWFN0YTEZJTUdAzQaRlZOQLcq3kFJWWVNfWINtYgeEhQeCAEekrAyBhq1wBGyI8UekjIiHjxjogQgXIEAIhUIUFO50uBAA3NJukA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">applyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">player</span><span class="token parameter punctuation" style="color:#393A34">:</span><span class="token parameter"> EntityPlayer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> entity </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> </span><span class="token maybe-class-name">Isaac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">GetRoomEntities</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">shouldApplyGreenCandleEffectToEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// TODO - Apply poison</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">shouldApplyGreenCandleEffectToEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">entity</span><span class="token parameter punctuation" style="color:#393A34">:</span><span class="token parameter"> Entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// TODO - Return true or false based on a random chance</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></code></pre></div><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10-applying-the-poison"></a>10) Applying the Poison<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10-applying-the-poison" title="Direct link to heading">#</a></h2><p>Adding the poison is done with the <code>AddPoison</code> method. However, notice that your IDE will give you an error if you try to supply the player as the source:</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/GYVwdgxgLglg9mABAQwA6oDYE8DiAnAUwLAGFkwATDAgUWGAOgApNksC8AuRGsWKLAAUMbDgEpEAbwBQiRMDh5ETCAgDOURMX5ZEcYIgCSa5MggA6HASgAlOHAC2vfjAJqmYiTLlyYBpmoAFnAgGBQAgujY+ESk5FS09IxQACpwzjACTNqZWJ5Ssj5yAPTFiCmBBIhqIXgQVTBqiFCViKzseIVFpeWtFCB4yLAIiI2IAIwADJPygw5uXT49FVUUyA7IAOYNTQQAjiDIGM1wza3tHADkTWsb29VQQ4tyOQLm4RQUgnCNCCwiHQANBNpsCLnhzAARdZbAhiADcz0QPSYLTGQTgAHcmuQtHg8IpRkgWlVDJCaIgAEaMZAgNRVD5fH41JAEAAeqGSOKQGQENgIwDEiwAvoVRcKgA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">applyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">player</span><span class="token parameter punctuation" style="color:#393A34">:</span><span class="token parameter"> EntityPlayer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> entity </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> </span><span class="token maybe-class-name">Isaac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">GetRoomEntities</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">shouldApplyGreenCandleEffectToEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// The source is the player</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// The duration is 100 frames</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// The damage is equal to the player&#x27;s damage stat</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">AddPoison</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">player</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> player</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Damage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// (this shows an error in the IDE because AddPoison expects an EntityRef)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></code></pre></div><p>TypeScript saves the day, telling us that we actually need to feed the function an entity reference. This is accomplished by simply casting the player as an <code>EntityRef</code>. (The &quot;EntityRef()&quot; function is a global.)</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/KYOwLglmCeB0CCATRAFA9hAzmkAKAouFNAErABmuADgDYCG0wATgJQA0ABAIwAMPntBs1gAROgFs6Ac2AsA3EA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">AddPoison</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function maybe-class-name" style="color:#d73a49">EntityRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">player</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> player</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Damage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></code></pre></div><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="11-detect-invulnerable-enemies-and-add-a-random-chance"></a>11) Detect Invulnerable Enemies and Add a Random Chance<a aria-hidden="true" tabindex="-1" class="hash-link" href="#11-detect-invulnerable-enemies-and-add-a-random-chance" title="Direct link to heading">#</a></h2><p>Now, let&#x27;s fill in the <code>shouldApplyGreenCandleEffectToEntity()</code> function.</p><p>First, we also need to check to see if the entity is supposed to be damaged by using the <code>IsVulnerableEnemy()</code> method.</p><p>(Some enemies, like Stonies, are supposed to be invincible, so it would be a bug in our mod if the poison effect actually applied to them.)</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/GYVwdgxgLglg9mABAZwBZxAGwCYEEAO+mAngOIBOAppWAMICGY2mlAosMJdACpytiwoxABQ1BxAFyJ+4gJSIA3gChEiAPRrEAIgC29KKgB05Rtjg7hAVgAM12VsQBzGpRNRKyRPUQmm5xGAgOgBGroihUADu1EgAjF5MiDbWKuqa3KgwnlleiPGayYgQqIwQlAA0iHDkiNaGAEwApKlUUCDkSGIwQoYAksgAalhgrvTBLPyUOiLyAGSziHoGxqbmVrbyALzbeQDcSgC+QA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">shouldApplyGreenCandleEffectToEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">entity</span><span class="token parameter punctuation" style="color:#393A34">:</span><span class="token parameter"> Entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;math.random(500)&quot; generates a random number between 1 and 500</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// This is a 1 / 500 chance, or 0.2%</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">IsVulnerableEnemy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></code></pre></div><p>Notice here that we use Lua&#x27;s <code>math.random()</code> function, which is available to use in TypeScript thanks to the underlying TypeScriptToLua library that is currently loaded. (If you don&#x27;t like using Lua libraries for whatever reason, you could also use the equivalent JavaScript version, which is <code>Math.floor(Math.random() * 10) + 1</code>. It would transpile to the same thing.)</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="12-done"></a>12) Done!<a aria-hidden="true" tabindex="-1" class="hash-link" href="#12-done" title="Direct link to heading">#</a></h2><p>The mod is now complete. It looks like the following:</p><div class="mdxCodeBlock_1XEh"><pre class="prism-code language-typescript codeBlock_222H"><button type="button" aria-label="Copy code to clipboard" class="copyButton_ujp3">Copy</button><a aria-label="Open code on playground" class="playgroundButton_3DKR" target="_blank" href="/play/#code/PTAECUFMHMEsGcAukBOpEAtKgLYHsATAKBFAAoB3DWAYw1AtgBsncBDAa21kVHgzwVQAVwAOoWADt0WUEwS88AM1yF4oPNMzZ8BPjRSRI0qTJ1tTOY8ICURGpqShoh4wGE2kgk2wBeCDAKqACyhGQARC5Gkh5ePuEANKAAjDYA3EQkYKF6AG5sKLBsAEY+8PaOvFHunt6QAJLIOPUAIqD+9fBsbDQAdADikIiNkM0EAEIAngBybFYR-a7SsXXh6ZmkLZBKUtg0bCzFPRygSsKSNIiwjkRnF1eaoKJ4SACqogRsyGQ2oADeRFAoDokBoHAAgqJRExJotoisfABRJRKUGIH4ZAC+mTul2u0hBYMh0NhSwRkGRqMuP3+gOBlWccz8oH6TIxdIckickmEOAACkw2JNUOp-NAmQMhtNeQKhSL2UClHg0GQfLxYO1QAAGNISUAAHlAPP5guFKHgutgAGorb8AUCgZynNC5WgOl0epLELKzWRYOsHRIVGQXWbQABCXz+HksUAAMjjT1NqF6AAk2PA3HgWGjYKVIGRqjFaj4Rs0WjY7XTA2woTC4TU4hSUWiQ8mUAGHdigdjsbdznjHrWSQ3i03Ka3Q6gAFygRGSK6ISY+1BVxXK8hO3jGReTDQqTrdPqDRDgPB4HDzxewSDwH5rh2wYP8PDCJgEYn1skl5tUxAAFTwK8eEmMgdxAytaUDIFwKXXpwQIAg+TwBBNDIYClygJQ21dGwkmSLUtSSKcUF6Fo5jYaBIE7Hs6V7HEBweaQXzfD861JeEfwnS5AIw0DYMmWc+IfUhwhwL4MF6FBagvMgAFZCJscJnGMVAvlvUA2FAaSvAvI1eWKVBQEMxAKGiFJNK8UAFK1OlSH-ah1AQTSLLAGzgQwTwaEgJINy1XoACYAFI6UMRBhBQaQBN6ToADU30kNT83nUZQN+BN2EwKSZJweTFPaKMUixDYwCgOAkCM-ZDmOcoi3JeDEI8aqwTIHImqYI4wXgXpgjcAB9PkAHkAGV-z614+RacF-0RYiXkQd5PmQdYslAPlCgXSyJEkHginkAAvL58VwW8uio9A8DMUBwiYPBoF6RAAA9EGUnYfCIQ9PS2YphGgYbEA26AIgc7BR1AclVD0ZypF2g5YH2yACF6NY0iAA">Playground</a><code class="codeBlockLines_3zpG" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Register the mod</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// (which will make it show up in the list of mods on the mod screen in the main menu)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> greenCandle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">RegisterMod</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;greenCandle&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Mod variables</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> greenCandleItemID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Isaac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">GetItemIdByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Green Candle&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Define callback functions</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">postUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">checkApplyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkApplyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> game </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Game</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> numPlayers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> game</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">GetNumPlayers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> numPlayers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> player </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Isaac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">GetPlayer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">player </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> player</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">HasCollectible</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">greenCandleItemID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">applyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">player</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">applyGreenCandleEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">player</span><span class="token parameter punctuation" style="color:#393A34">:</span><span class="token parameter"> EntityPlayer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> entity </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> </span><span class="token maybe-class-name">Isaac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">GetRoomEntities</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">shouldApplyGreenCandleEffectToEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">AddPoison</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function maybe-class-name" style="color:#d73a49">EntityRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">player</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> player</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Damage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">shouldApplyGreenCandleEffectToEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">entity</span><span class="token parameter punctuation" style="color:#393A34">:</span><span class="token parameter"> Entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;math.random(500)&quot; generates a random number between 1 and 500</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// This is a 1 / 500 chance, or 0.2%</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">IsVulnerableEnemy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Register callbacks</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">greenCandle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">AddCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">ModCallbacks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">MC_POST_UPDATE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> postUpdate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Print an initialization message to the &quot;log.txt&quot; file</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Isaac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">DebugString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;The Green Candle mod is initialized.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></code></pre></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/IsaacScript/isaacscript.github.io/edit/main/docs/example-mod.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/javascript-tutorial"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« JavaScript/TypeScript Tutorial</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/refactoring-mod"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Refactoring an Example Mod Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#0-unpack-the-games-resources" class="table-of-contents__link">0) Unpack the Games Resources</a></li><li><a href="#1-initializing-the-project" class="table-of-contents__link">1) Initializing the Project</a></li><li><a href="#2-create-the-image-for-the-item" class="table-of-contents__link">2) Create the Image for the Item</a></li><li><a href="#3-create-the-entry-for-the-item-in-itemsxml" class="table-of-contents__link">3) Create the Entry For the Item in <code>items.xml</code></a></li><li><a href="#4-create-the-entry-for-the-item-in-itempoolsxml" class="table-of-contents__link">4) Create the Entry for the Item in <code>itempools.xml</code></a></li><li><a href="#5-start-coding-the-effect" class="table-of-contents__link">5) Start Coding the Effect</a></li><li><a href="#6-get-the-id-for-the-green-candle-item" class="table-of-contents__link">6) Get the ID for the Green Candle Item</a></li><li><a href="#7-add-a-new-callback" class="table-of-contents__link">7) Add a New Callback</a></li><li><a href="#8-getting-the-number-of-green-candles" class="table-of-contents__link">8) Getting the Number of Green Candles</a></li><li><a href="#9-looping-over-all-the-enemies-in-a-room" class="table-of-contents__link">9) Looping Over All the Enemies in a Room</a></li><li><a href="#10-applying-the-poison" class="table-of-contents__link">10) Applying the Poison</a></li><li><a href="#11-detect-invulnerable-enemies-and-add-a-random-chance" class="table-of-contents__link">11) Detect Invulnerable Enemies and Add a Random Chance</a></li><li><a href="#12-done" class="table-of-contents__link">12) Done!</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/styles.131dfc03.js"></script>
<script src="/runtime~main.3620621c.js"></script>
<script src="/main.df272832.js"></script>
<script src="/1.5ab4e0c4.js"></script>
<script src="/2.436b57f3.js"></script>
<script src="/4.c3d1d3f0.js"></script>
<script src="/1be78505.6305a4b7.js"></script>
<script src="/27.80302adb.js"></script>
<script src="/935f2afb.6cd477d4.js"></script>
<script src="/17896441.625286cd.js"></script>
<script src="/9bc37e6c.74604c52.js"></script>
</body>
</html>